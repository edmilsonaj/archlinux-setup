---
- name: Create /etc/locale.gen
  ansible.builtin.template:
    src: locale.gen.j2
    dest: /etc/locale.gen

- name: Generate locales
  community.general.locale_gen:
    name: "{{ item | split(' ') | first }}"
    state: present
  with_items: "{{ locales }}"

- name: Configure languages
  ansible.builtin.copy:
    content: "{{ language }}"
    dest: /etc/locale.conf